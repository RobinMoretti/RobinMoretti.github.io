---
layout: post
title: Brume VIgnette  - Devlog 1/2
subtitle: Log de d√©veloppement
date: '2020-07-24T12:57:35+02:00'
tags: [devlog, gamedev]
tumblr_url: https://robinmoretti.tumblr.com/post/624519550143234048/brume-vignette-devlog-12
---
<p>Bonjour √† tous ! üòÑ</p><p>J'ai enfin un peu de temps libre pour √©crire un devlog concernant Brume Vignette r√©alis√© √† l'occasion de la jam du Pang Pang Club <a href="https://itch.io/jam/ppj-vignette" target="_blank">#PPJVignette</a>, il y a quelque temps, du 16 au 18 juin 2020.

</p><figure class="tmblr-full" data-orig-height="451" data-orig-width="480"><img src="https://64.media.tumblr.com/8815f7677f5bc457115c270361d456ce/e578c86e1598c3f9-4b/s540x810/b7ff467f66417086d7e59ef33d0925543b7e47d1.gif" alt="" data-orig-height="451" data-orig-width="480"/></figure><p><br/></p>

<p><iframe src="https://itch.io/embed/674096?linkback=true&amp;border_width=4&amp;bg_color=ffffff&amp;fg_color=474d87&amp;link_color=262b61&amp;border_color=cccccc" width="558" height="173" frameborder="0"><a href="https://robinmoretti.itch.io/brume-vignette" target="_blank">Brume vignette by Robin Moretti</a></iframe></p>


<p><a href="https://robinmoretti.itch.io/brume-vignette/devlog/164471/how-to-brume-vignette-small-devlog-enfr" target="_blank">English version here</a></p>
<!-- more -->
<p>Le sujet √©tait relativement simple, &ldquo;<b>Vignette&rdquo;</b>.</p><p><b>Qu'est-ce que c'est une vignette ?</b></p><ul><li>une sc√®ne courte, entre 1 sec et une poign√©e de minutes</li>
<li>une interaction simple</li>
<li>une capsule atmosph√©rique</li>
<li>un moment &ldquo;gratuit&rdquo;</li>
</ul><p><b>Contraintes:</b></p><ul><li>un cadrage carr√©</li>
<li>un plan fixe</li>
</ul><p>Une vignette peut √™tre suivie, ou non, de plusieurs autres vignettes.</p><p>L'id√©e √©tait pour moi tr√®s simple. Depuis mon dipl√¥me, j'ai des s√©ries de dessins Brume qui tra√Ænent. C'√©tait l'occasion de tester quelque chose de plus graphique avec de simples interactions. Une petite balade onirique graphique, rythm√© pas l'interaction au click de la souris, potentiellement fonctionnel sur t√©l√©phone.</p><p>Voici la s√©rie de mes dessins originaux qui m'ont inspir√©.
</p><figure class="tmblr-full" data-orig-height="1906" data-orig-width="1500"><img src="https://64.media.tumblr.com/8fc77bdaf40f76a17a48d67dd580083c/e578c86e1598c3f9-74/s540x810/513ef43fcf5267709dac9364156a869a4c7dff2a.jpg" alt="" data-orig-height="1906" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1892" data-orig-width="1500"><img src="https://64.media.tumblr.com/05503444cf16f8b34f371180f81885ca/e578c86e1598c3f9-3b/s540x810/0d6eb101bcca7e343b1d2a46a0a07936ac710d8b.jpg" alt="" data-orig-height="1892" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1875" data-orig-width="1500"><img src="https://64.media.tumblr.com/38778992c582eade076335b7be0d8eca/e578c86e1598c3f9-a2/s540x810/52e740698c11d1658349e544ebc9b6b2518f7978.jpg" alt="" data-orig-height="1875" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1875" data-orig-width="1500"><img src="https://64.media.tumblr.com/7a1eacf72e3d6a506cfee7b2266338ce/e578c86e1598c3f9-23/s540x810/21861bfb37b719dab52a7ed1002c1146fd2d2efd.jpg" alt="" data-orig-height="1875" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1874" data-orig-width="1500"><img src="https://64.media.tumblr.com/0fc4a1ea56322ba2579b1a7cc695e503/e578c86e1598c3f9-77/s540x810/0490e415bf08529e57ae061f3a5f806db3eb6ac0.jpg" alt="" data-orig-height="1874" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1916" data-orig-width="1500"><img src="https://64.media.tumblr.com/d24dc3e4b8fccf3f87961230357ed204/e578c86e1598c3f9-47/s540x810/988651a2b5cbf7f8f2aa259b62a8793f9eebb9b1.jpg" alt="" data-orig-height="1916" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1875" data-orig-width="1500"><img src="https://64.media.tumblr.com/c26fdf7a81c921f898d78ace48ac6fa1/e578c86e1598c3f9-43/s540x810/66389a2b17d9bafe111d72b7d4dc39d640491dde.jpg" alt="" data-orig-height="1875" data-orig-width="1500"/></figure><p>Mon premier objectif, une semaine avant la jam, √©tait de me pr√©parer un maximum, sans cr√©er d'assets. Mon plan √©tait de r√©aliser en avance :</p><ul><li>Un story board</li>
<li>Mettre en place le workflow en avance, notamment la production des assets (dessin, animation etc)</li>
<li>Trouver les m√©thodes de programmations concernant les principaux modules ( ench√®nement des sc√®nes, drag and drop etc )</li>
</ul><h2>Storyboard:</h2><figure class="tmblr-full" data-orig-height="1500" data-orig-width="1500"><img src="https://64.media.tumblr.com/e4f73838e2d67ad6bbca96bc5b3a1d55/e578c86e1598c3f9-51/s540x810/96a39ca954bac01fd459863c14c962efbc52e7b5.jpg" alt="" data-orig-height="1500" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1500" data-orig-width="1500"><img src="https://64.media.tumblr.com/9e5068611d2916ce57cd126a6a0ef678/e578c86e1598c3f9-16/s540x810/2cfa2d3e5b5aab7ef67c4e6ddcec5288a3517449.jpg" alt="" data-orig-height="1500" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1500" data-orig-width="1500"><img src="https://64.media.tumblr.com/258f1d74d3dd73c962159be8b1c5c1c4/e578c86e1598c3f9-ee/s540x810/b72e9869658775b8006b20f8037af48a4d0fbd9d.jpg" alt="" data-orig-height="1500" data-orig-width="1500"/></figure><figure class="tmblr-full" data-orig-height="1500" data-orig-width="1500"><img src="https://64.media.tumblr.com/88ff446e06e94aeabadfcf08f166ea6f/e578c86e1598c3f9-e9/s540x810/f093532f260c35ebd875fdd9233ef22235634353.jpg" alt="" data-orig-height="1500" data-orig-width="1500"/></figure><p></p><p>Juste deux mots sur le contenu, il n'est pas forcement &ldquo;explicable&rdquo; et je ne suis pas s√ªr que se soit r√©ellement int√©ressant. J'aime l'id√©e de vous laisser naviguer dans quelque chose de semi abstrait. Un commentaire de mon premier jeu Brume me revient, &ldquo;c'est de l'impressionnisme vid√©o-ludique&rdquo;, sans √™tre enti√®rement d'accord, un peintre √† t-il vraiment n√©cessit√© √† expliquer son sujet ? Je ne suis pas s√ªr. Ce qui m'importe, c'est que le changement de sc√®ne, l'ellipse et l'interaction soit chef d'orchestre et narrateur. En tout cas, je suis content du r√©sultat et de l'ambiance produite.</p><p>Bref, je continue.</p><h2>Animation (unit3D)</h2><p>Maintenant le syst√®me d'animation 2D de Unity, qui est √† mon avis, est vraiment g√©nial, mais avec un GROS default.
</p><figure class="tmblr-full" data-orig-height="420" data-orig-width="532"><img src="https://64.media.tumblr.com/bd1da96e725b7bdcf2ea4db36dc9d4e1/e578c86e1598c3f9-ac/s540x810/5d1f90b4242781b9b1be2ce09d1e67fd7a2c0cf2.gif" alt="" data-orig-height="420" data-orig-width="532"/></figure><p>√Ä la base, Unity n'int√©grait aucun syst√®me 2d ( lorsque j'ai commenc√© √† fabriquer mes premiers jeux 2015-2016).</p><p>Il exist√© alors quelque plugins payant, donc inaccessible pour moi. C'est comme √ßa que j'ai commenc√© la 3d, qui est √† mon sens, est moins accessible et bien plus difficile √† prendre en mains afin d'obtenir des rendus graphiques originaux et/ou avec un parti prix fort.</p><p>Aujourd'hui, c'est tout autre chose, il y a eu le plugin exp√©rimental Anima2D, fabriqu√© par Unity, qui √©tait vraiment super. Aujourd'hui, il est directement int√©gr√© comme package officiel sous le nom de&hellip;. <b>animation 2d</b>. Ce qui est pour moi le seul v√©ritable probl√®me de ce package.</p><p>En tant que dev/auto-didacte (la magie d'internet), ce qui fait la force de tout outil, c'est, 1, √ßa communaut√©, 2, √ßa documentation, 3, son accessibilit√©. Toutes ces informations/outils sont accessibles via n'importe quel moteur de recherche. Cette accessibilit√© d√©pends aussi de sont r√©f√©rencement. Et autant vous dire qu'avec un nom aussi basique&hellip; Sont accessibilit√© en prend un coup üò¢.</p><p>Pour les bases pas de package, il y a beaucoup de vid√©o d'introduction r√©alis√© par des youtubeur &ldquo;c√©l√®bre&rdquo; comme celle cis ou ce blog de Unity.</p><p><a href="https://blogs.unity3d.com/2018/12/04/getting-started-with-2d-inverse-kinematics/" target="_blank">-&gt; Getting Started with 2D Inverse Kinematics2D „Ç§„É≥„Éê„Éº„Çπ„Ç≠„Éç„Éû„ÉÜ„Ç£„ÇØ„Çπ„Çπ„Çø„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç¨„Ç§„Éâ - Unity Technologies Blog</a></p><p>Package == Librairie maintenant int√©gr√© officiellement par Unity (je crois)</p><p>Plugin == Simple dossier provenant d'une source non reconnue</p><p>Du coup, jusque-l√†, pas de soucis, mais lorsque l'on rentre en pratique, les probl√®mes √©mergent.  &ldquo;Comment cr√©er un squelette sans fichiers PSB (batch import)&rdquo; par exemple et l√†, l'enfer sur terre. Le r√©f√©rencement bloque avec un nom aussi banal que &ldquo;animation 2d&rdquo;. Il est tr√®s difficile de trouver des r√©ponses pertinentes simplement √† cause d'un nom de package.
</p><figure class="tmblr-full" data-orig-height="312" data-orig-width="446"><img src="https://64.media.tumblr.com/cc3f9c3c5aef43f9c88edb7d99590d48/e578c86e1598c3f9-41/s540x810/f015cfe4bebb7518a19f8a585e756c372353c539.gif" alt="" data-orig-height="312" data-orig-width="446"/></figure><iframe src="https://www.youtube.com/embed/UOd9EJweTQc?feature=oembed&amp;enablejsapi=1&amp;origin=https://safe.txmblr.com&amp;wmode=opaque" allowfullscreen="" width="540" height="405" frameborder="0"></iframe><iframe src="https://www.youtube.com/embed/0jrncTM9ljw?feature=oembed&amp;enablejsapi=1&amp;origin=https://safe.txmblr.com&amp;wmode=opaque" allowfullscreen="" width="540" height="405" frameborder="0"></iframe><p>L'import PSB est assez g√©nial d'ailleurs. √áa fait gager un temps infini ! Le format PSB est le format utilis√© par Photoshop pour les documents vraiment lourd (1~3GB). Unity a int√©gr√© un outil pour ne plus avoir √† organiser notre image une fois notre personnage fait (dessin√© et calque superpos√©).</p><p>Petit tip pour les utilisateurs d'Affinity qui n'a pas d'export psb (pas psd), simplement renomm√© votre fichier mon-fichier.psd ‚Üí mon-fichier.psb.</p><p><b>Drag and drop</b></p><p>Je vous pose √ßa comme √ßa üôÇ.</p><p>Chaque objets doivent avoir un collider avec un RigidBody.</p><pre><code>using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UIElements;

public class DirectDragAndDrop : MonoBehaviour
{    
    private Vector3 mOffset;
    private float mZCoord;
    public bool x, y, z;
    public GameObject alternativeTarget;
    public bool enableLimits = true;
    public Vector2 maxX, maxY;

    private GameObject target;

    private void Start()
    {
        if (alternativeTarget != null)
        {
            target = alternativeTarget;
        }
        else
        {
            target = gameObject;
        }
    }

    void OnMouseDown()
     {
         mZCoord = Camera.main.WorldToScreenPoint(target.transform.position).z;

         // Store offset = gameobject world pos - mouse world pos
         mOffset = target.transform.position - GetMouseAsWorldPoint();
     }

    private void OnMouseUp()
    {
    }

    private Vector3 GetMouseAsWorldPoint()
     {
         // Pixel coordinates of mouse (x,y)
         Vector3 mousePoint = Input.mousePosition;

         // z coordinate of game object on screen
         mousePoint.z = mZCoord;

         // Convert it to world points
         return Camera.main.ScreenToWorldPoint(mousePoint);
     }

     void OnMouseDrag()
     {
         moveObject();
     }

     void moveObject()
     {
         if (enableLimits)
         {
             Vector3 mousePosition = GetMouseAsWorldPoint();
             Vector3 final = new Vector3(x ? mousePosition.x : 0, y ? mousePosition.y : 0, z ? mousePosition.z : 0);
             final += mOffset;

             if (final.x &lt; maxX.x)
             {
                 final.x = maxX.x;
             }
             else if (final.x &gt; maxX.y)
             {
                 final.x = maxX.y;
             }

             if (final.z &lt; maxY.x)
             {
                 final.z = maxY.x;
             }
             else if (final.z &gt; maxY.y)
             {
                 final.z = maxY.y;
             }
             target.transform.position = final;
         }
         else
         {
             Vector3 mousePosition = GetMouseAsWorldPoint();
             Vector3 final = new Vector3(x ? mousePosition.x : 0, y ? mousePosition.y : 0, z ? mousePosition.z : 0);

             target.transform.position = final + mOffset;
         }
     }
}
</code></pre><p><b>Trou dynamique</b></p><p>Depuis tr√®s longtemps, j'essaie de m'introduire √† la modification de model 3d en temps r√©el, comme le contr√¥le d'un trou dynamique, sans succ√®s. C'√©tait probablement le plus gros d√©fi technique de cette jam. Depuis longtemps je ne trouvais pas d'exemple claire ou de tuto. La solution √©tait pourtant &lsquo;simple&rsquo; ( rappelez-vous l'accessibilit√© üòÖ ), googler ‚Üí &ldquo;How to make Donut country&rdquo;.</p><p>Si les termes techniques vous sont inconnus, trouver un jeu qui utilise cette m√©canique ~ technique ~ principe (ou la sc√®ne d'un jeu), il sera alors probablement le chemin le plus rapide pour trouver la solution a votre probl√®me. En l'occurrence pour moi, ce fut ce jeu, Donut Country, qui base enti√®rement sont gameplay sur ce principe.</p><p>La suite dans le prochain post &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</p>
